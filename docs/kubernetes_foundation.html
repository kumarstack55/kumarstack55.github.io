<!doctype html>
<html class="no-js" lang="ja">
  <head><meta charset="utf-8"/>
    <meta name="viewport" content="width=device-width,initial-scale=1"/>
    <meta name="color-scheme" content="light dark"><meta name="generator" content="Docutils 0.17.1: http://docutils.sourceforge.net/" />
<link rel="index" title="索引" href="genindex.html" /><link rel="search" title="検索" href="search.html" /><link rel="next" title="kubectl" href="kubernetes_kubectl.html" /><link rel="prev" title="Kubernetes" href="kubernetes.html" />

    <meta name="generator" content="sphinx-4.2.0, furo 2021.10.09"/>
        <title>Kubernetes 基礎 - Untitled ドキュメント</title>
      <link rel="stylesheet" type="text/css" href="_static/pygments.css" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo.css?digest=0254c309f5cadf746f1a613e7677379ac9c8cdcd" />
    <link rel="stylesheet" type="text/css" href="_static/styles/furo-extensions.css?digest=16fb25fabf47304eee183a5e9af80b1ba98259b1" />
    
    


<style>
  body {
    --color-code-background: #f8f8f8;
  --color-code-foreground: black;
  
  }
  body[data-theme="dark"] {
    --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
  }
  @media (prefers-color-scheme: dark) {
    body:not([data-theme="light"]) {
      --color-code-background: #202020;
  --color-code-foreground: #d0d0d0;
  
    }
  }
</style></head>
  <body>
    <script>
      document.body.dataset.theme = localStorage.getItem("theme") || "auto";
    </script>
    
<svg xmlns="http://www.w3.org/2000/svg" style="display: none;">
  <symbol id="svg-toc" viewBox="0 0 24 24">
    <title>Contents</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round">
      <path stroke="none" d="M0 0h24v24H0z" />
      <line x1="4" y1="6" x2="20" y2="6" />
      <line x1="10" y1="12" x2="20" y2="12" />
      <line x1="6" y1="18" x2="20" y2="18" />
    </svg>
  </symbol>
  <symbol id="svg-menu" viewBox="0 0 24 24">
    <title>Menu</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-menu">
      <line x1="3" y1="12" x2="21" y2="12"></line>
      <line x1="3" y1="6" x2="21" y2="6"></line>
      <line x1="3" y1="18" x2="21" y2="18"></line>
    </svg>
  </symbol>
  <symbol id="svg-arrow-right" viewBox="0 0 24 24">
    <title>Expand</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="2" stroke-linecap="round" stroke-linejoin="round" class="feather-chevron-right">
      <polyline points="9 18 15 12 9 6"></polyline>
    </svg>
  </symbol>
  <symbol id="svg-sun" viewBox="0 0 24 24">
    <title>Light mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="feather-sun">
      <circle cx="12" cy="12" r="5"></circle>
      <line x1="12" y1="1" x2="12" y2="3"></line>
      <line x1="12" y1="21" x2="12" y2="23"></line>
      <line x1="4.22" y1="4.22" x2="5.64" y2="5.64"></line>
      <line x1="18.36" y1="18.36" x2="19.78" y2="19.78"></line>
      <line x1="1" y1="12" x2="3" y2="12"></line>
      <line x1="21" y1="12" x2="23" y2="12"></line>
      <line x1="4.22" y1="19.78" x2="5.64" y2="18.36"></line>
      <line x1="18.36" y1="5.64" x2="19.78" y2="4.22"></line>
    </svg>
  </symbol>
  <symbol id="svg-moon" viewBox="0 0 24 24">
    <title>Dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-moon">
      <path stroke="none" d="M0 0h24v24H0z" fill="none" />
      <path d="M12 3c.132 0 .263 0 .393 0a7.5 7.5 0 0 0 7.92 12.446a9 9 0 1 1 -8.313 -12.454z" />
    </svg>
  </symbol>
  <symbol id="svg-sun-half" viewBox="0 0 24 24">
    <title>Auto light/dark mode</title>
    <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 24 24" fill="none" stroke="currentColor"
      stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round" class="icon-tabler-shadow">
      <path stroke="none" d="M0 0h24v24H0z" fill="none"/>
      <circle cx="12" cy="12" r="9" />
      <path d="M13 12h5" />
      <path d="M13 15h4" />
      <path d="M13 18h1" />
      <path d="M13 9h4" />
      <path d="M13 6h1" />
    </svg>
  </symbol>
</svg>

<input type="checkbox" class="sidebar-toggle" name="__navigation" id="__navigation">
<input type="checkbox" class="sidebar-toggle" name="__toc" id="__toc">
<label class="overlay sidebar-overlay" for="__navigation">
  <div class="visually-hidden">Hide navigation sidebar</div>
</label>
<label class="overlay toc-overlay" for="__toc">
  <div class="visually-hidden">Hide table of contents sidebar</div>
</label>



<div class="page">
  <header class="mobile-header">
    <div class="header-left">
      <label class="nav-overlay-icon" for="__navigation">
        <div class="visually-hidden">Toggle site navigation sidebar</div>
        <i class="icon"><svg><use href="#svg-menu"></use></svg></i>
      </label>
    </div>
    <div class="header-center">
      <a href="index.html"><div class="brand">Untitled  ドキュメント</div></a>
    </div>
    <div class="header-right">
      <div class="theme-toggle-container theme-toggle-header">
        <button class="theme-toggle">
          <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
          <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
          <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
          <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
        </button>
      </div>
      <label class="toc-overlay-icon toc-header-icon" for="__toc">
        <div class="visually-hidden">Toggle table of contents sidebar</div>
        <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
      </label>
    </div>
  </header>
  <aside class="sidebar-drawer">
    <div class="sidebar-container">
      
      <div class="sidebar-sticky"><a class="sidebar-brand" href="index.html">
  
  
  <span class="sidebar-brand-text">Untitled  ドキュメント</span>
  
</a><form class="sidebar-search-container" method="get" action="search.html" role="search">
  <input class="sidebar-search" placeholder=検索 name="q" aria-label="検索">
  <input type="hidden" name="check_keywords" value="yes">
  <input type="hidden" name="area" value="default">
</form>
<div id="searchbox"></div><div class="sidebar-scroll"><div class="sidebar-tree">
  <p class="caption" role="heading"><span class="caption-text">Contents:</span></p>
<ul class="current">
<li class="toctree-l1"><a class="reference internal" href="oci.html">Oracle Cloud</a></li>
<li class="toctree-l1"><a class="reference internal" href="vagrant.html">Vagrant</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux.html">Linux</a></li>
<li class="toctree-l1"><a class="reference internal" href="linux_network.html">Linuxでネットワークの操作をする。</a></li>
<li class="toctree-l1"><a class="reference internal" href="ssh.html">SSH</a></li>
<li class="toctree-l1"><a class="reference internal" href="debian.html">Debian</a></li>
<li class="toctree-l1"><a class="reference internal" href="ubuntu.html">Ubuntu</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="bash.html">Bash</a><input class="toctree-checkbox" id="toctree-checkbox-1" name="toctree-checkbox-1" role="switch" type="checkbox"/><label for="toctree-checkbox-1"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="bash_foundation.html">bash基礎</a></li>
<li class="toctree-l2"><a class="reference internal" href="bash_application.html">bash応用</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="bats.html">bats</a></li>
<li class="toctree-l1"><a class="reference internal" href="git.html">Git</a></li>
<li class="toctree-l1"><a class="reference internal" href="python.html">python</a></li>
<li class="toctree-l1"><a class="reference internal" href="container.html">コンテナ</a></li>
<li class="toctree-l1 current has-children"><a class="reference internal" href="kubernetes.html">Kubernetes</a><input checked="" class="toctree-checkbox" id="toctree-checkbox-2" name="toctree-checkbox-2" role="switch" type="checkbox"/><label for="toctree-checkbox-2"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul class="current">
<li class="toctree-l2 current current-page"><a class="current reference internal" href="#">Kubernetes 基礎</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes_kubectl.html">kubectl</a></li>
<li class="toctree-l2"><a class="reference internal" href="kubernetes_minikube.html">Minikube</a></li>
</ul>
</li>
<li class="toctree-l1"><a class="reference internal" href="windows.html">Microsoft Windows</a></li>
<li class="toctree-l1 has-children"><a class="reference internal" href="powershell.html">PowerShell</a><input class="toctree-checkbox" id="toctree-checkbox-3" name="toctree-checkbox-3" role="switch" type="checkbox"/><label for="toctree-checkbox-3"><div class="visually-hidden">Toggle child pages in navigation</div><i class="icon"><svg><use href="#svg-arrow-right"></use></svg></i></label><ul>
<li class="toctree-l2"><a class="reference internal" href="powershell_uncategorized.html">PowerShell 未分類</a></li>
<li class="toctree-l2"><a class="reference internal" href="powershell_get_childitem.html">停止しても再実行できるように、ファイルの一覧を出力する。</a></li>
<li class="toctree-l2"><a class="reference internal" href="powershell_pester.html">Pester でテストする。</a></li>
</ul>
</li>
</ul>

</div>
</div>
      </div>
      
    </div>
  </aside>
  <div class="main">
    <div class="content">
      <div class="article-container">
        <div class="content-icon-container">
          <div class="theme-toggle-container theme-toggle-content">
            <button class="theme-toggle">
              <div class="visually-hidden">Toggle Light / Dark / Auto color theme</div>
              <svg class="theme-icon-when-auto"><use href="#svg-sun-half"></use></svg>
              <svg class="theme-icon-when-dark"><use href="#svg-moon"></use></svg>
              <svg class="theme-icon-when-light"><use href="#svg-sun"></use></svg>
            </button>
          </div>
          <label class="toc-overlay-icon toc-content-icon" for="__toc">
            <div class="visually-hidden">Toggle table of contents sidebar</div>
            <i class="icon"><svg><use href="#svg-toc"></use></svg></i>
          </label>
        </div>
        <article role="main">
          <section class="tex2jax_ignore mathjax_ignore" id="kubernetes">
<h1>Kubernetes 基礎<a class="headerlink" href="#kubernetes" title="このヘッドラインへのパーマリンク">¶</a></h1>
<section id="id1">
<h2>クライアントとサーバのバージョンを確認する。<a class="headerlink" href="#id1" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:/tmp$ </span>kubectl version
<span class="go">Client Version: version.Info{Major:"1", Minor:"23", GitVersion:"v1.23.1", GitCommit:"86ec240af8cbd1b60bcc4c03c20da9b98005b92e", GitTreeState:"clean", BuildDate:"2021-12-16T11:41:01Z", GoVersion:"go1.17.5", Compiler:"gc", Platform:"linux/amd64"}</span>
<span class="go">Server Version: version.Info{Major:"1", Minor:"22", GitVersion:"v1.22.3", GitCommit:"c92036820499fedefec0f847e2054d824aea6cd1", GitTreeState:"clean", BuildDate:"2021-10-27T18:35:25Z", GoVersion:"go1.16.9", Compiler:"gc", Platform:"linux/amd64"}</span>
</pre></div>
</div>
</section>
<section id="id2">
<h2>設定のコンテキストを得る。<a class="headerlink" href="#id2" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:/tmp$ </span>kubectl config get-contexts
<span class="go">CURRENT   NAME       CLUSTER    AUTHINFO   NAMESPACE</span>
<span class="go">*         minikube   minikube   minikube   default</span>
</pre></div>
</div>
</section>
<section id="id3">
<h2>設定を見る。<a class="headerlink" href="#id3" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:/tmp$ </span>kubectl config view
<span class="go">apiVersion: v1</span>
<span class="go">clusters:</span>
<span class="go">- cluster:</span>
<span class="go">    certificate-authority: /home/vagrant/.minikube/ca.crt</span>
<span class="go">    extensions:</span>
<span class="go">    - extension:</span>
<span class="go">        last-update: Mon, 03 Jan 2022 23:01:23 JST</span>
<span class="go">        provider: minikube.sigs.k8s.io</span>
<span class="go">        version: v1.24.0</span>
<span class="go">      name: cluster_info</span>
<span class="go">    server: https://192.168.49.2:8443</span>
<span class="go">  name: minikube</span>
<span class="go">contexts:</span>
<span class="go">- context:</span>
<span class="go">    cluster: minikube</span>
<span class="go">    extensions:</span>
<span class="go">    - extension:</span>
<span class="go">        last-update: Mon, 03 Jan 2022 23:01:23 JST</span>
<span class="go">        provider: minikube.sigs.k8s.io</span>
<span class="go">        version: v1.24.0</span>
<span class="go">      name: context_info</span>
<span class="go">    namespace: default</span>
<span class="go">    user: minikube</span>
<span class="go">  name: minikube</span>
<span class="go">current-context: minikube</span>
<span class="go">kind: Config</span>
<span class="go">preferences: {}</span>
<span class="go">users:</span>
<span class="go">- name: minikube</span>
<span class="go">  user:</span>
<span class="go">    client-certificate: /home/vagrant/.minikube/profiles/minikube/client.crt</span>
<span class="go">    client-key: /home/vagrant/.minikube/profiles/minikube/client.key</span>
</pre></div>
</div>
</section>
<section id="id4">
<h2>イベントを得る。<a class="headerlink" href="#id4" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get events
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl get events
<span class="go">LAST SEEN   TYPE     REASON                    OBJECT          MESSAGE</span>
<span class="go">46h         Normal   Starting                  node/minikube   Starting kubelet.</span>
<span class="go">46h         Normal   NodeHasSufficientMemory   node/minikube   Node minikube status is now: NodeHasSufficientMemory</span>
<span class="go">46h         Normal   NodeHasNoDiskPressure     node/minikube   Node minikube status is now: NodeHasNoDiskPressure</span>
<span class="go">46h         Normal   NodeHasSufficientPID      node/minikube   Node minikube status is now: NodeHasSufficientPID</span>
<span class="go">46h         Normal   NodeNotReady              node/minikube   Node minikube status is now: NodeNotReady</span>
<span class="go">46h         Normal   NodeAllocatableEnforced   node/minikube   Updated Node Allocatable limit across pods</span>
<span class="go">46h         Normal   NodeReady                 node/minikube   Node minikube status is now: NodeReady</span>
<span class="go">46h         Normal   RegisteredNode            node/minikube   Node minikube event: Registered Node minikube in Controller</span>
<span class="go">46h         Normal   NodeNotReady              node/minikube   Node minikube status is now: NodeNotReady</span>
<span class="go">46h         Normal   Starting                  node/minikube</span>
<span class="go">46h         Normal   Starting                  node/minikube   Starting kubelet.</span>
<span class="go">46h         Normal   NodeHasSufficientMemory   node/minikube   Node minikube status is now: NodeHasSufficientMemory</span>
<span class="go">46h         Normal   NodeHasNoDiskPressure     node/minikube   Node minikube status is now: NodeHasNoDiskPressure</span>
<span class="go">46h         Normal   NodeHasSufficientPID      node/minikube   Node minikube status is now: NodeHasSufficientPID</span>
<span class="go">46h         Normal   NodeAllocatableEnforced   node/minikube   Updated Node Allocatable limit across pods</span>
<span class="go">46h         Normal   Starting                  node/minikube</span>
<span class="go">46h         Normal   RegisteredNode            node/minikube   Node minikube event: Registered Node minikube in Controller</span>
<span class="go">46h         Normal   NodeNotReady              node/minikube   Node minikube status is now: NodeNotReady</span>
<span class="go">100m        Normal   Starting                  node/minikube   Starting kubelet.</span>
<span class="go">99m         Normal   NodeHasSufficientMemory   node/minikube   Node minikube status is now: NodeHasSufficientMemory</span>
<span class="go">99m         Normal   NodeHasNoDiskPressure     node/minikube   Node minikube status is now: NodeHasNoDiskPressure</span>
<span class="go">99m         Normal   NodeHasSufficientPID      node/minikube   Node minikube status is now: NodeHasSufficientPID</span>
<span class="go">100m        Normal   NodeAllocatableEnforced   node/minikube   Updated Node Allocatable limit across pods</span>
<span class="go">99m         Normal   Starting                  node/minikube</span>
<span class="go">99m         Normal   RegisteredNode            node/minikube   Node minikube event: Registered Node minikube in Controller</span>
<span class="go">16m         Normal   Starting                  node/minikube   Starting kubelet.</span>
<span class="go">9m58s       Normal   NodeHasSufficientMemory   node/minikube   Node minikube status is now: NodeHasSufficientMemory</span>
<span class="go">16m         Normal   NodeHasNoDiskPressure     node/minikube   Node minikube status is now: NodeHasNoDiskPressure</span>
<span class="go">16m         Normal   NodeHasSufficientPID      node/minikube   Node minikube status is now: NodeHasSufficientPID</span>
<span class="go">16m         Normal   NodeAllocatableEnforced   node/minikube   Updated Node Allocatable limit across pods</span>
<span class="go">13m         Normal   Starting                  node/minikube</span>
<span class="go">13m         Normal   RegisteredNode            node/minikube   Node minikube event: Registered Node minikube in Controller</span>
<span class="go">8m22s       Normal   NodeNotReady              node/minikube   Node minikube status is now: NodeNotReady</span>
</pre></div>
</div>
</section>
<section id="api">
<h2>名前空間にあるAPIリソースを得る。<a class="headerlink" href="#api" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:/tmp$ </span>kubectl api-resources --namespaced<span class="o">=</span><span class="nb">true</span>
<span class="go">NAME                        SHORTNAMES   APIVERSION                     NAMESPACED   KIND</span>
<span class="go">bindings                                 v1                             true         Binding</span>
<span class="go">configmaps                  cm           v1                             true         ConfigMap</span>
<span class="go">endpoints                   ep           v1                             true         Endpoints</span>
<span class="go">events                      ev           v1                             true         Event</span>
<span class="go">limitranges                 limits       v1                             true         LimitRange</span>
<span class="go">persistentvolumeclaims      pvc          v1                             true         PersistentVolumeClaim</span>
<span class="go">pods                        po           v1                             true         Pod</span>
<span class="go">podtemplates                             v1                             true         PodTemplate</span>
<span class="go">replicationcontrollers      rc           v1                             true         ReplicationController</span>
<span class="go">resourcequotas              quota        v1                             true         ResourceQuota</span>
<span class="go">secrets                                  v1                             true         Secret</span>
<span class="go">serviceaccounts             sa           v1                             true         ServiceAccount</span>
<span class="go">services                    svc          v1                             true         Service</span>
<span class="go">controllerrevisions                      apps/v1                        true         ControllerRevision</span>
<span class="go">daemonsets                  ds           apps/v1                        true         DaemonSet</span>
<span class="go">deployments                 deploy       apps/v1                        true         Deployment</span>
<span class="go">replicasets                 rs           apps/v1                        true         ReplicaSet</span>
<span class="go">statefulsets                sts          apps/v1                        true         StatefulSet</span>
<span class="go">localsubjectaccessreviews                authorization.k8s.io/v1        true         LocalSubjectAccessReview</span>
<span class="go">horizontalpodautoscalers    hpa          autoscaling/v1                 true         HorizontalPodAutoscaler</span>
<span class="go">cronjobs                    cj           batch/v1                       true         CronJob</span>
<span class="go">jobs                                     batch/v1                       true         Job</span>
<span class="go">leases                                   coordination.k8s.io/v1         true         Lease</span>
<span class="go">endpointslices                           discovery.k8s.io/v1            true         EndpointSlice</span>
<span class="go">events                      ev           events.k8s.io/v1               true         Event</span>
<span class="go">ingresses                   ing          networking.k8s.io/v1           true         Ingress</span>
<span class="go">networkpolicies             netpol       networking.k8s.io/v1           true         NetworkPolicy</span>
<span class="go">poddisruptionbudgets        pdb          policy/v1                      true         PodDisruptionBudget</span>
<span class="go">rolebindings                             rbac.authorization.k8s.io/v1   true         RoleBinding</span>
<span class="go">roles                                    rbac.authorization.k8s.io/v1   true         Role</span>
<span class="go">csistoragecapacities                     storage.k8s.io/v1beta1         true         CSIStorageCapacity</span>
</pre></div>
</div>
</section>
<section id="id5">
<h2>名前空間にないAPIリソースを得る。<a class="headerlink" href="#id5" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:/tmp$ </span>kubectl api-resources --namespaced<span class="o">=</span><span class="nb">false</span>
<span class="go">NAME                              SHORTNAMES   APIVERSION                             NAMESPACED   KIND</span>
<span class="go">componentstatuses                 cs           v1                                     false        ComponentStatus</span>
<span class="go">namespaces                        ns           v1                                     false        Namespace</span>
<span class="go">nodes                             no           v1                                     false        Node</span>
<span class="go">persistentvolumes                 pv           v1                                     false        PersistentVolume</span>
<span class="go">mutatingwebhookconfigurations                  admissionregistration.k8s.io/v1        false        MutatingWebhookConfiguration</span>
<span class="go">validatingwebhookconfigurations                admissionregistration.k8s.io/v1        false        ValidatingWebhookConfiguration</span>
<span class="go">customresourcedefinitions         crd,crds     apiextensions.k8s.io/v1                false        CustomResourceDefinition</span>
<span class="go">apiservices                                    apiregistration.k8s.io/v1              false        APIService</span>
<span class="go">tokenreviews                                   authentication.k8s.io/v1               false        TokenReview</span>
<span class="go">selfsubjectaccessreviews                       authorization.k8s.io/v1                false        SelfSubjectAccessReview</span>
<span class="go">selfsubjectrulesreviews                        authorization.k8s.io/v1                false        SelfSubjectRulesReview</span>
<span class="go">subjectaccessreviews                           authorization.k8s.io/v1                false        SubjectAccessReview</span>
<span class="go">certificatesigningrequests        csr          certificates.k8s.io/v1                 false        CertificateSigningRequest</span>
<span class="go">flowschemas                                    flowcontrol.apiserver.k8s.io/v1beta1   false        FlowSchema</span>
<span class="go">prioritylevelconfigurations                    flowcontrol.apiserver.k8s.io/v1beta1   false        PriorityLevelConfiguration</span>
<span class="go">ingressclasses                                 networking.k8s.io/v1                   false        IngressClass</span>
<span class="go">runtimeclasses                                 node.k8s.io/v1                         false        RuntimeClass</span>
<span class="go">podsecuritypolicies               psp          policy/v1beta1                         false        PodSecurityPolicy</span>
<span class="go">clusterrolebindings                            rbac.authorization.k8s.io/v1           false        ClusterRoleBinding</span>
<span class="go">clusterroles                                   rbac.authorization.k8s.io/v1           false        ClusterRole</span>
<span class="go">priorityclasses                   pc           scheduling.k8s.io/v1                   false        PriorityClass</span>
<span class="go">csidrivers                                     storage.k8s.io/v1                      false        CSIDriver</span>
<span class="go">csinodes                                       storage.k8s.io/v1                      false        CSINode</span>
<span class="go">storageclasses                    sc           storage.k8s.io/v1                      false        StorageClass</span>
<span class="go">volumeattachments                              storage.k8s.io/v1                      false        VolumeAttachment</span>
</pre></div>
</div>
</section>
<section id="id6">
<h2>名前空間の一覧を得る。<a class="headerlink" href="#id6" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get namespaces

kubectl get namespaces --show-labels
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:/tmp$ </span>kubectl get namespaces
<span class="go">NAME              STATUS   AGE</span>
<span class="go">default           Active   23m</span>
<span class="go">kube-node-lease   Active   24m</span>
<span class="go">kube-public       Active   24m</span>
<span class="go">kube-system       Active   24m</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl get namespaces --show-labels
<span class="go">NAME                   STATUS   AGE     LABELS</span>
<span class="go">default                Active   45h     kubernetes.io/metadata.name=default</span>
<span class="go">development            Active   5m41s   kubernetes.io/metadata.name=development,name=development</span>
<span class="go">kube-node-lease        Active   45h     kubernetes.io/metadata.name=kube-node-lease</span>
<span class="go">kube-public            Active   45h     kubernetes.io/metadata.name=kube-public</span>
<span class="go">kube-system            Active   45h     kubernetes.io/metadata.name=kube-system</span>
<span class="go">kubernetes-dashboard   Active   44h     addonmanager.kubernetes.io/mode=Reconcile,kubernetes.io/metadata.name=kubernetes-dashboard,kubernetes.io/minikube-addons=dashboard</span>
<span class="go">production             Active   95s     kubernetes.io/metadata.name=production,name=production</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get namespaces --show-labels <span class="p">|</span> grep -i -e ^NAME -e production -e development
<span class="go">NAME                   STATUS   AGE     LABELS</span>
<span class="go">development            Active   6m42s   kubernetes.io/metadata.name=development,name=development</span>
<span class="go">production             Active   2m36s   kubernetes.io/metadata.name=production,name=production</span>
</pre></div>
</div>
<p>https://kubernetes.io/docs/concepts/overview/working-with-objects/namespaces/#viewing-namespaces</p>
</section>
<section id="id7">
<h2>名前空間を作る。<a class="headerlink" href="#id7" title="このヘッドラインへのパーマリンク">¶</a></h2>
<section id="yaml">
<h3>名前空間をYAMLで作る。<a class="headerlink" href="#yaml" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>cat <span class="s">&lt;&lt;__YAML__ &gt;my-ns1.yaml</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Namespace</span>
<span class="s">metadata:</span>
<span class="s">  name: ns1</span>
<span class="s">__YAML__</span>

kubectl create -f my-ns1.yaml
</pre></div>
</div>
</section>
<section id="json">
<h3>名前空間をJSONで作る。<a class="headerlink" href="#json" title="このヘッドラインへのパーマリンク">¶</a></h3>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl create -f https://k8s.io/examples/admin/namespace-dev.json
kubectl create -f https://k8s.io/examples/admin/namespace-prod.json
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>curl -Ls kubectl create -f https://k8s.io/examples/admin/names
<span class="go">pace-dev.json</span>
<span class="go">{</span>
<span class="go">  "apiVersion": "v1",</span>
<span class="go">  "kind": "Namespace",</span>
<span class="go">  "metadata": {</span>
<span class="go">    "name": "development",</span>
<span class="go">    "labels": {</span>
<span class="go">      "name": "development"</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>

<span class="gp">vagrant@buster:~$ </span>curl -Ls kubectl create -f https://k8s.io/examples/admin/names
<span class="go">pace-prod.json</span>
<span class="go">{</span>
<span class="go">  "apiVersion": "v1",</span>
<span class="go">  "kind": "Namespace",</span>
<span class="go">  "metadata": {</span>
<span class="go">    "name": "production",</span>
<span class="go">    "labels": {</span>
<span class="go">      "name": "production"</span>
<span class="go">    }</span>
<span class="go">  }</span>
<span class="go">}</span>

<span class="gp">vagrant@buster:~$ </span>kubectl create -f https://kubernetes.io/examples/admin/namespace-dev.json
<span class="go">namespace/development created</span>

<span class="gp">vagrant@buster:~$ </span>kubectl create -f https://k8s.io/examples/admin/namespace-prod.json
<span class="go">namespace/production created</span>
</pre></div>
</div>
<p>https://kubernetes.io/docs/tasks/administer-cluster/namespaces/#creating-a-new-namespace</p>
</section>
</section>
<section id="id8">
<h2>名前空間を消す。<a class="headerlink" href="#id8" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl create -f my-ns1.yaml
</pre></div>
</div>
</section>
<section id="pod">
<h2>Pod を作る。<a class="headerlink" href="#pod" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># nginx コンテナが動く Pod を定義する。</span>
kubectl apply -f https://k8s.io/examples/pods/simple-pod.yaml

<span class="c1"># debian コンテナが動く Pod を定義する。</span>
cat <span class="s">&lt;&lt;__YAML__ | tee ./pod-debian.yaml</span>
<span class="s">apiVersion: v1</span>
<span class="s">kind: Pod</span>
<span class="s">metadata:</span>
<span class="s">  name: debian</span>
<span class="s">spec:</span>
<span class="s">  containers:</span>
<span class="s">  - name: debian</span>
<span class="s">    image: debian:latest</span>
<span class="s">    command: [ "/bin/bash", "-c", "--" ]</span>
<span class="s">    args: [ "while true; do sleep 30; done;" ]</span>
<span class="s">__YAML__</span>
kubectl apply -f ./pod-debian.yaml
kubectl get po debian
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>curl -Ls https://k8s.io/examples/pods/simple-pod.yaml
<span class="go">apiVersion: v1</span>
<span class="go">kind: Pod</span>
<span class="go">metadata:</span>
<span class="go">  name: nginx</span>
<span class="go">spec:</span>
<span class="go">  containers:</span>
<span class="go">  - name: nginx</span>
<span class="go">    image: nginx:1.14.2</span>
<span class="go">    ports:</span>
<span class="go">    - containerPort: 80</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl apply -f https://k8s.io/examples/pods/simple-pod.yaml
<span class="go">pod/nginx created</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po
<span class="go">NAME    READY   STATUS    RESTARTS   AGE</span>
<span class="go">nginx   1/1     Running   0          54s</span>
</pre></div>
</div>
<ul class="simple">
<li><p>https://kubernetes.io/docs/concepts/workloads/pods/</p></li>
<li><p>https://stackoverflow.com/a/40093356/12786161</p></li>
</ul>
</section>
<section id="id9">
<h2>Podの一覧を得る。<a class="headerlink" href="#id9" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get po

<span class="c1"># 名前空間を指定する。</span>
kubectl get po --namespace production
kubectl get po --namespace development
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po
<span class="go">NAME     READY   STATUS    RESTARTS      AGE</span>
<span class="go">debian   1/1     Running   1 (11m ago)   7h43m</span>
<span class="go">nginx    1/1     Running   1 (11m ago)   5h</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po --namespace production
<span class="go">No resources found in production namespace.</span>
</pre></div>
</div>
</section>
<section id="id10">
<h2>Podの情報を得る。<a class="headerlink" href="#id10" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl describe po debian
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl describe po debian
<span class="go">Name:         debian</span>
<span class="go">Namespace:    default</span>
<span class="go">Priority:     0</span>
<span class="go">Node:         minikube/192.168.49.2</span>
<span class="go">Start Time:   Sun, 09 Jan 2022 02:45:56 +0000</span>
<span class="go">Labels:       &lt;none&gt;</span>
<span class="go">Annotations:  &lt;none&gt;</span>
<span class="go">Status:       Running</span>
<span class="go">IP:           172.17.0.4</span>
<span class="go">IPs:</span>
<span class="go">  IP:  172.17.0.4</span>
<span class="go">Containers:</span>
<span class="go">  debian:</span>
<span class="go">    Container ID:  docker://769dda214d49bad8b9280c2eb789aad45bc533baac08ab5ccf0c6cf53befac44</span>
<span class="go">    Image:         debian:latest</span>
<span class="go">    Image ID:      docker-pullable://debian@sha256:2906804d2a64e8a13a434a1a127fe3f6a28bf7cf3696be4223b06276f32f1f2d</span>
<span class="go">    Port:          &lt;none&gt;</span>
<span class="go">    Host Port:     &lt;none&gt;</span>
<span class="go">    Command:</span>
<span class="go">      /bin/bash</span>
<span class="go">      -c</span>
<span class="go">      --</span>
<span class="go">    Args:</span>
<span class="go">      while true; do sleep 30; done;</span>
<span class="go">    State:          Running</span>
<span class="go">      Started:      Sun, 09 Jan 2022 10:18:32 +0000</span>
<span class="go">    Last State:     Terminated</span>
<span class="go">      Reason:       Error</span>
<span class="go">      Exit Code:    255</span>
<span class="go">      Started:      Sun, 09 Jan 2022 02:46:00 +0000</span>
<span class="go">      Finished:     Sun, 09 Jan 2022 10:17:39 +0000</span>
<span class="go">    Ready:          True</span>
<span class="go">    Restart Count:  1</span>
<span class="go">    Environment:    &lt;none&gt;</span>
<span class="go">    Mounts:</span>
<span class="go">      /var/run/secrets/kubernetes.io/serviceaccount from kube-api-access-jwvv9 (ro)</span>
<span class="go">Conditions:</span>
<span class="go">  Type              Status</span>
<span class="go">  Initialized       True</span>
<span class="go">  Ready             True</span>
<span class="go">  ContainersReady   True</span>
<span class="go">  PodScheduled      True</span>
<span class="go">Volumes:</span>
<span class="go">  kube-api-access-jwvv9:</span>
<span class="go">    Type:                    Projected (a volume that contains injected data from multiple sources)</span>
<span class="go">    TokenExpirationSeconds:  3607</span>
<span class="go">    ConfigMapName:           kube-root-ca.crt</span>
<span class="go">    ConfigMapOptional:       &lt;nil&gt;</span>
<span class="go">    DownwardAPI:             true</span>
<span class="go">QoS Class:                   BestEffort</span>
<span class="go">Node-Selectors:              &lt;none&gt;</span>
<span class="go">Tolerations:                 node.kubernetes.io/not-ready:NoExecute op=Exists for 300s</span>
<span class="go">                             node.kubernetes.io/unreachable:NoExecute op=Exists for 300s</span>
<span class="go">Events:</span>
<span class="go">  Type    Reason          Age    From     Message</span>
<span class="go">  ----    ------          ----   ----     -------</span>
<span class="go">  Normal  SandboxChanged  10m    kubelet  Pod sandbox changed, it will be killed and re-created.</span>
<span class="go">  Normal  Pulling         9m50s  kubelet  Pulling image "debian:latest"</span>
<span class="go">  Normal  Pulled          9m46s  kubelet  Successfully pulled image "debian:latest" in 3.854382685s</span>
<span class="go">  Normal  Created         9m46s  kubelet  Created container debian</span>
<span class="go">  Normal  Started         9m45s  kubelet  Started container debian</span>
</pre></div>
</div>
</section>
<section id="podyaml">
<h2>PodのYAMLを得る。<a class="headerlink" href="#podyaml" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get po debian -o yaml
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po debian -o yaml
<span class="go">apiVersion: v1</span>
<span class="go">kind: Pod</span>
<span class="go">metadata:</span>
<span class="go">  annotations:</span>
<span class="go">    kubectl.kubernetes.io/last-applied-configuration: |</span>
<span class="go">      {"apiVersion":"v1","kind":"Pod","metadata":{"annotations":{},"name":"debian","namespace":"default"},"spec":{"containers":[{"args":["while true; do sleep 30; done;"],"command":["/bin/bash","-c","--"],"image":"debian:latest","name":"debian"}]}}</span>
<span class="go">  creationTimestamp: "2022-01-09T02:45:56Z"</span>
<span class="go">  name: debian</span>
<span class="go">  namespace: default</span>
<span class="go">  resourceVersion: "15700"</span>
<span class="go">  uid: c402f5fe-f554-4467-af88-df85c99776e0</span>
<span class="go">spec:</span>
<span class="go">  containers:</span>
<span class="go">  - args:</span>
<span class="go">    - while true; do sleep 30; done;</span>
<span class="go">    command:</span>
<span class="go">    - /bin/bash</span>
<span class="go">    - -c</span>
<span class="go">    - --</span>
<span class="go">    image: debian:latest</span>
<span class="go">    imagePullPolicy: Always</span>
<span class="go">    name: debian</span>
<span class="go">    resources: {}</span>
<span class="go">    terminationMessagePath: /dev/termination-log</span>
<span class="go">    terminationMessagePolicy: File</span>
<span class="go">    volumeMounts:</span>
<span class="go">    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount</span>
<span class="go">      name: kube-api-access-jwvv9</span>
<span class="go">      readOnly: true</span>
<span class="go">  dnsPolicy: ClusterFirst</span>
<span class="go">  enableServiceLinks: true</span>
<span class="go">  nodeName: minikube</span>
<span class="go">  preemptionPolicy: PreemptLowerPriority</span>
<span class="go">  priority: 0</span>
<span class="go">  restartPolicy: Always</span>
<span class="go">  schedulerName: default-scheduler</span>
<span class="go">  securityContext: {}</span>
<span class="go">  serviceAccount: default</span>
<span class="go">  serviceAccountName: default</span>
<span class="go">  terminationGracePeriodSeconds: 30</span>
<span class="go">  tolerations:</span>
<span class="go">  - effect: NoExecute</span>
<span class="go">    key: node.kubernetes.io/not-ready</span>
<span class="go">    operator: Exists</span>
<span class="go">    tolerationSeconds: 300</span>
<span class="go">  - effect: NoExecute</span>
<span class="go">    key: node.kubernetes.io/unreachable</span>
<span class="go">    operator: Exists</span>
<span class="go">    tolerationSeconds: 300</span>
<span class="go">  volumes:</span>
<span class="go">  - name: kube-api-access-jwvv9</span>
<span class="go">    projected:</span>
<span class="go">      defaultMode: 420</span>
<span class="go">      sources:</span>
<span class="go">      - serviceAccountToken:</span>
<span class="go">          expirationSeconds: 3607</span>
<span class="go">          path: token</span>
<span class="go">      - configMap:</span>
<span class="go">          items:</span>
<span class="go">          - key: ca.crt</span>
<span class="go">            path: ca.crt</span>
<span class="go">          name: kube-root-ca.crt</span>
<span class="go">      - downwardAPI:</span>
<span class="go">          items:</span>
<span class="go">          - fieldRef:</span>
<span class="go">              apiVersion: v1</span>
<span class="go">              fieldPath: metadata.namespace</span>
<span class="go">            path: namespace</span>
<span class="go">status:</span>
<span class="go">  conditions:</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T02:45:56Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: Initialized</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T10:18:32Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: Ready</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T10:18:32Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: ContainersReady</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T02:45:56Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: PodScheduled</span>
<span class="go">  containerStatuses:</span>
<span class="go">  - containerID: docker://769dda214d49bad8b9280c2eb789aad45bc533baac08ab5ccf0c6cf53befac44</span>
<span class="go">    image: debian:latest</span>
<span class="go">    imageID: docker-pullable://debian@sha256:2906804d2a64e8a13a434a1a127fe3f6a28bf7cf3696be4223b06276f32f1f2d</span>
<span class="go">    lastState:</span>
<span class="go">      terminated:</span>
<span class="go">        containerID: docker://f0978f1d55fa0d70ee9373230fdb8d738a7924f1b6f05635247320eb615c4ddd</span>
<span class="go">        exitCode: 255</span>
<span class="go">        finishedAt: "2022-01-09T10:17:39Z"</span>
<span class="go">        reason: Error</span>
<span class="go">        startedAt: "2022-01-09T02:46:00Z"</span>
<span class="go">    name: debian</span>
<span class="go">    ready: true</span>
<span class="go">    restartCount: 1</span>
<span class="go">    started: true</span>
<span class="go">    state:</span>
<span class="go">      running:</span>
<span class="go">        startedAt: "2022-01-09T10:18:32Z"</span>
<span class="go">  hostIP: 192.168.49.2</span>
<span class="go">  phase: Running</span>
<span class="go">  podIP: 172.17.0.4</span>
<span class="go">  podIPs:</span>
<span class="go">  - ip: 172.17.0.4</span>
<span class="go">  qosClass: BestEffort</span>
<span class="go">  startTime: "2022-01-09T02:45:56Z"</span>
</pre></div>
</div>
</section>
<section id="pod-yaml">
<h2>Pod の YAMLを得て、編集し、反映する。<a class="headerlink" href="#pod-yaml" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get po debian -o yaml &gt;debian.yaml

<span class="c1"># 1回目</span>
kubectl apply -f debian.yaml

<span class="c1"># 2回目</span>
kubectl apply -f debian.yaml
  <span class="c1"># k8s と debian.yaml に resourceVersion に相違があるので、反映に失敗する。</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po debian -o yaml &gt;debian.yaml

<span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl apply -f debian.yaml
<span class="go">pod/debian configured</span>

<span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl apply -f debian.yaml
<span class="go">Error from server (Conflict): error when applying patch:</span>
<span class="go">{"metadata":{"resourceVersion":"16383"}}</span>
<span class="go">to:</span>
<span class="go">Resource: "/v1, Resource=pods", GroupVersionKind: "/v1, Kind=Pod"</span>
<span class="go">Name: "debian", Namespace: "default"</span>
<span class="go">for: "debian.yaml": Operation cannot be fulfilled on pods "debian": the object has been modified; please apply your changes to the latest version and try again</span>
</pre></div>
</div>
</section>
<section id="pods">
<h2>Pods 内でコマンドを実行する。<a class="headerlink" href="#pods" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl <span class="nb">exec</span> debian /bin/bash
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl <span class="nb">exec</span> -it debian -- /bin/bash
<span class="gp">root@debian:/#</span>
</pre></div>
</div>
</section>
<section id="id11">
<h2>Pods を消す。<a class="headerlink" href="#id11" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl delete po nginx
<span class="go">pod "nginx" deleted</span>
</pre></div>
</div>
</section>
<section id="id12">
<h2>リソースの一覧を得る。<a class="headerlink" href="#id12" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get all
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get all
<span class="go">NAME                 TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span>
<span class="go">service/kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   29m</span>
</pre></div>
</div>
</section>
<section id="id13">
<h2>リソースの情報を得る。<a class="headerlink" href="#id13" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># サービスのkubernetesの情報を得る。</span>
kubectl describe service/kubernetes
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl describe service/kubernetes
<span class="go">Name:              kubernetes</span>
<span class="go">Namespace:         default</span>
<span class="go">Labels:            component=apiserver</span>
<span class="go">                   provider=kubernetes</span>
<span class="go">Annotations:       &lt;none&gt;</span>
<span class="go">Selector:          &lt;none&gt;</span>
<span class="go">Type:              ClusterIP</span>
<span class="go">IP Family Policy:  SingleStack</span>
<span class="go">IP Families:       IPv4</span>
<span class="go">IP:                10.96.0.1</span>
<span class="go">IPs:               10.96.0.1</span>
<span class="go">Port:              https  443/TCP</span>
<span class="go">TargetPort:        8443/TCP</span>
<span class="go">Endpoints:         192.168.49.2:8443</span>
<span class="go">Session Affinity:  None</span>
<span class="go">Events:            &lt;none&gt;</span>
</pre></div>
</div>
</section>
<section id="id14">
<h2>ログを得る。<a class="headerlink" href="#id14" title="このヘッドラインへのパーマリンク">¶</a></h2>
<p>TODO</p>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl logs
</pre></div>
</div>
</section>
<section id="id15">
<h2>コンテナ内でコマンドを実行する。<a class="headerlink" href="#id15" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl <span class="nb">exec</span>
</pre></div>
</div>
</section>
<section id="id16">
<h2>すべての名前空間のpodsを得る。<a class="headerlink" href="#id16" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl get po -A
<span class="go">NAMESPACE     NAME                               READY   STATUS    RESTARTS        AGE</span>
<span class="go">kube-system   coredns-78fcd69978-5zv2q           1/1     Running   1 (12m ago)     14m</span>
<span class="go">kube-system   etcd-minikube                      1/1     Running   1 (12m ago)     14m</span>
<span class="go">kube-system   kube-apiserver-minikube            1/1     Running   1 (12m ago)     14m</span>
<span class="go">kube-system   kube-controller-manager-minikube   1/1     Running   3               14m</span>
<span class="go">kube-system   kube-proxy-s4gv4                   1/1     Running   1 (12m ago)     14m</span>
<span class="go">kube-system   kube-scheduler-minikube            1/1     Running   1 (10m ago)     14m</span>
<span class="go">kube-system   storage-provisioner                0/1     Error     2 (7m28s ago)   14m</span>
</pre></div>
</div>
</section>
<section id="deployment">
<h2>Deploymentを得る。<a class="headerlink" href="#deployment" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl get deployment
kubectl get deployment -n<span class="o">=</span>development
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl get deployment -n<span class="o">=</span>development
<span class="go">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="go">snowflake   2/2     2            2           68s</span>
</pre></div>
</div>
</section>
<section id="deploymentpods">
<h2>Deploymentを作ることで、Podsを作る。<a class="headerlink" href="#deploymentpods" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span><span class="c1"># 名前空間 deployment に snowflake を作る。</span>
kubectl create deployment snowflake --image<span class="o">=</span>k8s.gcr.io/serve_hostname  -n<span class="o">=</span>development --replicas<span class="o">=</span><span class="m">2</span>
kubectl get deployment -n<span class="o">=</span>development
kubectl get pods -l <span class="nv">app</span><span class="o">=</span>snowflake -n<span class="o">=</span>development

<span class="c1"># 名前空間 production に cattle を作る。</span>
kubectl create deployment cattle --image<span class="o">=</span>k8s.gcr.io/serve_hostname -n<span class="o">=</span>production
kubectl scale deployment cattle --replicas<span class="o">=</span><span class="m">5</span> -n<span class="o">=</span>production
kubectl get deployment -n<span class="o">=</span>production
kubectl get pods -l <span class="nv">app</span><span class="o">=</span>cattle -n<span class="o">=</span>production

<span class="c1"># hello-node を作る。</span>
kubectl create deployment hello-node --image<span class="o">=</span>k8s.gcr.io/echoserver:1.4
kubectl get deployments
kubectl get pods
kubectl get events

<span class="c1"># nginx-deployment を作る。</span>
cat <span class="s">&lt;&lt;__YAML__ | tee ./nginx-deployment.yaml</span>
<span class="s">apiVersion: apps/v1</span>
<span class="s">kind: Deployment</span>
<span class="s">metadata:</span>
<span class="s">  name: nginx-deployment</span>
<span class="s">  labels:</span>
<span class="s">    app: nginx</span>
<span class="s">spec:</span>
<span class="s">  replicas: 3</span>
<span class="s">  selector:</span>
<span class="s">    matchLabels:</span>
<span class="s">      app: nginx</span>
<span class="s">  template:</span>
<span class="s">    metadata:</span>
<span class="s">      labels:</span>
<span class="s">        app: nginx</span>
<span class="s">    spec:</span>
<span class="s">      containers:</span>
<span class="s">      - name: nginx</span>
<span class="s">        image: nginx:1.14.2</span>
<span class="s">        ports:</span>
<span class="s">        - containerPort: 80</span>
<span class="s">__YAML__</span>
kubectl apply -f ./nginx-deployment.yaml
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl create deployment snowflake --image<span class="o">=</span>k8s.gcr.io/serve_hostname  -n<span class="o">=</span>development --replicas<span class="o">=</span><span class="m">2</span>
<span class="go">deployment.apps/snowflake created</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get deployment -n<span class="o">=</span>development
<span class="go">NAME        READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="go">snowflake   2/2     2            2           68s</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get pods -l <span class="nv">app</span><span class="o">=</span>snowflake -n<span class="o">=</span>development
<span class="go">NAME                         READY   STATUS    RESTARTS   AGE</span>
<span class="go">snowflake-7cf7c446bc-pqbvb   1/1     Running   0          92s</span>
<span class="go">snowflake-7cf7c446bc-xmsch   1/1     Running   0          92s</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl create deployment cattle --image<span class="o">=</span>k8s.gcr.io/serve_hostname -n<span class="o">=</span>production
<span class="go">deployment.apps/cattle created</span>

<span class="gp">vagrant@buster:~$ </span>kubectl scale deployment cattle --replicas<span class="o">=</span><span class="m">5</span> -n<span class="o">=</span>production
<span class="go">deployment.apps/cattle scaled</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get deployment -n<span class="o">=</span>production
<span class="go">NAME     READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="go">cattle   3/5     5            3           10s</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get deployment -n<span class="o">=</span>production
<span class="go">NAME     READY   UP-TO-DATE   AVAILABLE   AGE</span>
<span class="go">cattle   5/5     5            5           15s</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get pods -l <span class="nv">app</span><span class="o">=</span>cattle -n<span class="o">=</span>production
<span class="go">NAME                      READY   STATUS    RESTARTS   AGE</span>
<span class="go">cattle-65d567657f-56n8p   1/1     Running   0          72s</span>
<span class="go">cattle-65d567657f-cpcb5   1/1     Running   0          67s</span>
<span class="go">cattle-65d567657f-ndhs4   1/1     Running   0          67s</span>
<span class="go">cattle-65d567657f-q594z   1/1     Running   0          67s</span>
<span class="go">cattle-65d567657f-q8xdg   1/1     Running   0          67s</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl apply -f ./nginx-deployment.yaml
<span class="go">deployment.apps/nginx-deployment created</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po
<span class="go">NAME                                READY   STATUS    RESTARTS   AGE</span>
<span class="go">nginx-deployment-66b6c48dd5-bdzkk   1/1     Running   0          2m34s</span>
<span class="go">nginx-deployment-66b6c48dd5-js6pm   1/1     Running   0          2m34s</span>
<span class="go">nginx-deployment-66b6c48dd5-rs47f   1/1     Running   0          2m34s</span>
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@ubuntu-focal:~$ </span>kubectl get po nginx-deployment-66b6c48dd5-bdzkk -o yaml
<span class="go">apiVersion: v1</span>
<span class="go">kind: Pod</span>
<span class="go">metadata:</span>
<span class="go">  creationTimestamp: "2022-01-09T12:17:56Z"</span>
<span class="go">  generateName: nginx-deployment-66b6c48dd5-</span>
<span class="go">  labels:</span>
<span class="go">    app: nginx</span>
<span class="go">    pod-template-hash: 66b6c48dd5</span>
<span class="go">  name: nginx-deployment-66b6c48dd5-bdzkk</span>
<span class="go">  namespace: default</span>
<span class="go">  ownerReferences:</span>
<span class="go">  - apiVersion: apps/v1</span>
<span class="go">    blockOwnerDeletion: true</span>
<span class="go">    controller: true</span>
<span class="go">    kind: ReplicaSet</span>
<span class="go">    name: nginx-deployment-66b6c48dd5</span>
<span class="go">    uid: 76ac0f6c-0ebf-4823-9c3b-e7d7ced2da2d</span>
<span class="go">  resourceVersion: "20168"</span>
<span class="go">  uid: a45bc209-3359-4ef2-b79d-88299e29a0c3</span>
<span class="go">spec:</span>
<span class="go">  containers:</span>
<span class="go">  - image: nginx:1.14.2</span>
<span class="go">    imagePullPolicy: IfNotPresent</span>
<span class="go">    name: nginx</span>
<span class="go">    ports:</span>
<span class="go">    - containerPort: 80</span>
<span class="go">      protocol: TCP</span>
<span class="go">    resources: {}</span>
<span class="go">    terminationMessagePath: /dev/termination-log</span>
<span class="go">    terminationMessagePolicy: File</span>
<span class="go">    volumeMounts:</span>
<span class="go">    - mountPath: /var/run/secrets/kubernetes.io/serviceaccount</span>
<span class="go">      name: kube-api-access-khdj9</span>
<span class="go">      readOnly: true</span>
<span class="go">  dnsPolicy: ClusterFirst</span>
<span class="go">  enableServiceLinks: true</span>
<span class="go">  nodeName: minikube</span>
<span class="go">  preemptionPolicy: PreemptLowerPriority</span>
<span class="go">  priority: 0</span>
<span class="go">  restartPolicy: Always</span>
<span class="go">  schedulerName: default-scheduler</span>
<span class="go">  securityContext: {}</span>
<span class="go">  serviceAccount: default</span>
<span class="go">  serviceAccountName: default</span>
<span class="go">  terminationGracePeriodSeconds: 30</span>
<span class="go">  tolerations:</span>
<span class="go">  - effect: NoExecute</span>
<span class="go">    key: node.kubernetes.io/not-ready</span>
<span class="go">    operator: Exists</span>
<span class="go">    tolerationSeconds: 300</span>
<span class="go">  - effect: NoExecute</span>
<span class="go">    key: node.kubernetes.io/unreachable</span>
<span class="go">    operator: Exists</span>
<span class="go">    tolerationSeconds: 300</span>
<span class="go">  volumes:</span>
<span class="go">  - name: kube-api-access-khdj9</span>
<span class="go">    projected:</span>
<span class="go">      defaultMode: 420</span>
<span class="go">      sources:</span>
<span class="go">      - serviceAccountToken:</span>
<span class="go">          expirationSeconds: 3607</span>
<span class="go">          path: token</span>
<span class="go">      - configMap:</span>
<span class="go">          items:</span>
<span class="go">          - key: ca.crt</span>
<span class="go">            path: ca.crt</span>
<span class="go">          name: kube-root-ca.crt</span>
<span class="go">      - downwardAPI:</span>
<span class="go">          items:</span>
<span class="go">          - fieldRef:</span>
<span class="go">              apiVersion: v1</span>
<span class="go">              fieldPath: metadata.namespace</span>
<span class="go">            path: namespace</span>
<span class="go">status:</span>
<span class="go">  conditions:</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T12:17:56Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: Initialized</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T12:18:02Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: Ready</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T12:18:02Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: ContainersReady</span>
<span class="go">  - lastProbeTime: null</span>
<span class="go">    lastTransitionTime: "2022-01-09T12:17:56Z"</span>
<span class="go">    status: "True"</span>
<span class="go">    type: PodScheduled</span>
<span class="go">  containerStatuses:</span>
<span class="go">  - containerID: docker://9016f35bce14dbd4d9457ed9574622ce669b02d57627e329b3e2961dcd5fefaa</span>
<span class="go">    image: nginx:1.14.2</span>
<span class="go">    imageID: docker-pullable://nginx@sha256:f7988fb6c02e0ce69257d9bd9cf37ae20a60f1df7563c3a2a6abe24160306b8d</span>
<span class="go">    lastState: {}</span>
<span class="go">    name: nginx</span>
<span class="go">    ready: true</span>
<span class="go">    restartCount: 0</span>
<span class="go">    started: true</span>
<span class="go">    state:</span>
<span class="go">      running:</span>
<span class="go">        startedAt: "2022-01-09T12:18:01Z"</span>
<span class="go">  hostIP: 192.168.49.2</span>
<span class="go">  phase: Running</span>
<span class="go">  podIP: 172.17.0.7</span>
<span class="go">  podIPs:</span>
<span class="go">  - ip: 172.17.0.7</span>
<span class="go">  qosClass: BestEffort</span>
<span class="go">  startTime: "2022-01-09T12:17:56Z"</span>
</pre></div>
</div>
</section>
<section id="export-service">
<h2>export で Service を作る。<a class="headerlink" href="#export-service" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-bash notranslate"><div class="highlight"><pre><span></span>kubectl expose deployment hello-node --type<span class="o">=</span>LoadBalancer --port<span class="o">=</span><span class="m">8080</span>
kubectl get svc
<span class="c1"># On minikube, the LoadBalancer type makes the Service accessible through the minikube service command.</span>
minikube service hello-node
</pre></div>
</div>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl get svc
<span class="go">NAME         TYPE        CLUSTER-IP   EXTERNAL-IP   PORT(S)   AGE</span>
<span class="go">kubernetes   ClusterIP   10.96.0.1    &lt;none&gt;        443/TCP   47h</span>

<span class="gp">vagrant@buster:~$ </span>kubectl expose deployment hello-node --type<span class="o">=</span>LoadBalancer --port<span class="o">=</span><span class="m">8080</span>
<span class="go">service/hello-node exposed</span>

<span class="gp">vagrant@buster:~$ </span>kubectl get svc
<span class="go">NAME         TYPE           CLUSTER-IP       EXTERNAL-IP   PORT(S)          AGE</span>
<span class="go">hello-node   LoadBalancer   10.105.231.194   &lt;pending&gt;     8080:30349/TCP   68s</span>
<span class="go">kubernetes   ClusterIP      10.96.0.1        &lt;none&gt;        443/TCP          47h</span>

<span class="gp">vagrant@buster:~$ </span>minikube service hello-node
<span class="go">|-----------|------------|-------------|---------------------------|</span>
<span class="go">| NAMESPACE |    NAME    | TARGET PORT |            URL            |</span>
<span class="go">|-----------|------------|-------------|---------------------------|</span>
<span class="go">| default   | hello-node |        8080 | http://192.168.49.2:30349 |</span>
<span class="go">|-----------|------------|-------------|---------------------------|</span>
<span class="go">?  Opening service default/hello-node in default browser...</span>
<span class="go">?  http://192.168.49.2:30349</span>

<span class="gp">vagrant@buster:~$ </span>ip -4 -o a
<span class="go">1: lo    inet 127.0.0.1/8 scope host lo\       valid_lft forever preferred_lft forever</span>
<span class="go">2: eth0    inet 10.0.2.15/24 brd 10.0.2.255 scope global dynamic eth0\       valid_lft 85413sec preferred_lft 85413sec</span>
<span class="go">3: docker0    inet 172.17.0.1/16 brd 172.17.255.255 scope global docker0\       valid_lft forever preferred_lft forever</span>
<span class="go">4: br-c21be1532ab5    inet 192.168.49.1/24 brd 192.168.49.255 scope global br-c21be1532ab5\       valid_lft forever preferred_lft forever</span>

<span class="gp">vagrant@buster:~$ </span>ps -ef <span class="p">|</span> grep -e <span class="s1">'^UID'</span> -e <span class="s1">'192.168.49.2'</span> <span class="p">|</span> grep -v grep
<span class="go">UID          PID    PPID  C STIME TTY          TIME CMD</span>
<span class="go">root        1008     372  0 22:13 ?        00:00:00 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 49153 -container-ip 192.168.49.2 -container-port 32443</span>
<span class="go">root        1020     372  0 22:13 ?        00:00:00 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 49154 -container-ip 192.168.49.2 -container-port 8443</span>
<span class="go">root        1033     372  0 22:13 ?        00:00:00 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 49155 -container-ip 192.168.49.2 -container-port 5000</span>
<span class="go">root        1047     372  0 22:13 ?        00:00:00 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 49156 -container-ip 192.168.49.2 -container-port 2376</span>
<span class="go">root        1060     372  0 22:13 ?        00:00:00 /usr/bin/docker-proxy -proto tcp -host-ip 127.0.0.1 -host-port 49157 -container-ip 192.168.49.2 -container-port 22</span>
<span class="go">root        1998    1094  7 22:14 ?        00:03:19 /var/lib/minikube/binaries/v1.22.3/kubelet --bootstrap-kubeconfig=/etc/kubernetes/bootstrap-kubelet.conf --config=/var/lib/kubelet/config.yaml --container-runtime=docker --hostname-override=minikube --kubeconfig=/etc/kubernetes/kubelet.conf --node-ip=192.168.49.2</span>
<span class="go">root        2711    2685  6 22:14 ?        00:02:39 etcd --advertise-client-urls=https://192.168.49.2:2379 --cert-file=/var/lib/minikube/certs/etcd/server.crt --client-cert-auth=true --data-dir=/var/lib/minikube/etcd --initial-advertise-peer-urls=https://192.168.49.2:2380 --initial-cluster=minikube=https://192.168.49.2:2380 --key-file=/var/lib/minikube/certs/etcd/server.key --listen-client-urls=https://127.0.0.1:2379,https://192.168.49.2:2379 --listen-metrics-urls=http://127.0.0.1:2381 --listen-peer-urls=https://192.168.49.2:2380 --name=minikube --peer-cert-file=/var/lib/minikube/certs/etcd/peer.crt --peer-client-cert-auth=true --peer-key-file=/var/lib/minikube/certs/etcd/peer.key --peer-trusted-ca-file=/var/lib/minikube/certs/etcd/ca.crt --proxy-refresh-interval=70000 --snapshot-count=10000 --trusted-ca-file=/var/lib/minikube/certs/etcd/ca.crt</span>
<span class="go">root        2845    2749 16 22:14 ?        00:07:10 kube-apiserver --advertise-address=192.168.49.2 --allow-privileged=true --authorization-mode=Node,RBAC --client-ca-file=/var/lib/minikube/certs/ca.crt --enable-admission-plugins=NamespaceLifecycle,LimitRanger,ServiceAccount,DefaultStorageClass,DefaultTolerationSeconds,NodeRestriction,MutatingAdmissionWebhook,ValidatingAdmissionWebhook,ResourceQuota --enable-bootstrap-token-auth=true --etcd-cafile=/var/lib/minikube/certs/etcd/ca.crt --etcd-certfile=/var/lib/minikube/certs/apiserver-etcd-client.crt --etcd-keyfile=/var/lib/minikube/certs/apiserver-etcd-client.key --etcd-servers=https://127.0.0.1:2379 --kubelet-client-certificate=/var/lib/minikube/certs/apiserver-kubelet-client.crt --kubelet-client-key=/var/lib/minikube/certs/apiserver-kubelet-client.key --kubelet-preferred-address-types=InternalIP,ExternalIP,Hostname --proxy-client-cert-file=/var/lib/minikube/certs/front-proxy-client.crt --proxy-client-key-file=/var/lib/minikube/certs/front-proxy-client.key --requestheader-allowed-names=front-proxy-client --requestheader-client-ca-file=/var/lib/minikube/certs/front-proxy-ca.crt --requestheader-extra-headers-prefix=X-Remote-Extra- --requestheader-group-headers=X-Remote-Group --requestheader-username-headers=X-Remote-User --secure-port=8443 --service-account-issuer=https://kubernetes.default.svc.cluster.local --service-account-key-file=/var/lib/minikube/certs/sa.pub --service-account-signing-key-file=/var/lib/minikube/certs/sa.key --service-cluster-ip-range=10.96.0.0/12 --tls-cert-file=/var/lib/minikube/certs/apiserver.crt --tls-private-key-file=/var/lib/minikube/certs/apiserver.key</span>

<span class="gp">vagrant@buster:~$ </span>sudo docker ps
<span class="go">CONTAINER ID   IMAGE                                 COMMAND                  CREATED      STATUS          PORTS                                                                                                                                  NAMES</span>
<span class="go">b3eefafc2996   gcr.io/k8s-minikube/kicbase:v0.0.28   "/usr/local/bin/entr…"   2 days ago   Up 44 minutes   127.0.0.1:49157-&gt;22/tcp, 127.0.0.1:49156-&gt;2376/tcp, 127.0.0.1:49155-&gt;5000/tcp, 127.0.0.1:49154-&gt;8443/tcp, 127.0.0.1:49153-&gt;32443/tcp   minikube</span>

<span class="gp">vagrant@buster:~$ </span>curl -w <span class="s1">'\n'</span> http://192.168.49.2:30349
<span class="go">CLIENT VALUES:</span>
<span class="go">client_address=172.17.0.1</span>
<span class="go">command=GET</span>
<span class="go">real path=/</span>
<span class="go">query=nil</span>
<span class="go">request_version=1.1</span>
<span class="go">request_uri=http://192.168.49.2:8080/</span>

<span class="go">SERVER VALUES:</span>
<span class="go">server_version=nginx: 1.10.0 - lua: 10001</span>

<span class="go">HEADERS RECEIVED:</span>
<span class="go">accept=*/*</span>
<span class="go">host=192.168.49.2:30349</span>
<span class="go">user-agent=curl/7.64.0</span>
<span class="go">BODY:</span>
<span class="go">-no body in request-</span>
</pre></div>
</div>
</section>
<section id="kubectl-get-pods-h">
<h2>参考: kubectl get pods -h<a class="headerlink" href="#kubectl-get-pods-h" title="このヘッドラインへのパーマリンク">¶</a></h2>
<div class="highlight-console notranslate"><div class="highlight"><pre><span></span><span class="gp">vagrant@buster:~$ </span>kubectl get pods -h
<span class="go">Display one or many resources.</span>

<span class="go"> Prints a table of the most important information about the specified resources. You can filter the list using a label</span>
<span class="go">selector and the --selector flag. If the desired resource type is namespaced you will only see results in your current</span>
<span class="go">namespace unless you pass --all-namespaces.</span>

<span class="go"> By specifying the output as 'template' and providing a Go template as the value of the --template flag, you can filter</span>
<span class="go">the attributes of the fetched resources.</span>

<span class="go">Use "kubectl api-resources" for a complete list of supported resources.</span>

<span class="go">Examples:</span>
<span class="gp">  # </span>List all pods <span class="k">in</span> ps output format
<span class="go">  kubectl get pods</span>

<span class="gp">  # </span>List all pods <span class="k">in</span> ps output format with more information <span class="o">(</span>such as node name<span class="o">)</span>
<span class="go">  kubectl get pods -o wide</span>

<span class="gp">  # </span>List a single replication controller with specified NAME <span class="k">in</span> ps output format
<span class="go">  kubectl get replicationcontroller web</span>

<span class="gp">  # </span>List deployments <span class="k">in</span> JSON output format, <span class="k">in</span> the <span class="s2">"v1"</span> version of the <span class="s2">"apps"</span> API group
<span class="go">  kubectl get deployments.v1.apps -o json</span>

<span class="gp">  # </span>List a single pod <span class="k">in</span> JSON output format
<span class="go">  kubectl get -o json pod web-pod-13je7</span>

<span class="gp">  # </span>List a pod identified by <span class="nb">type</span> and name specified <span class="k">in</span> <span class="s2">"pod.yaml"</span> <span class="k">in</span> JSON output format
<span class="go">  kubectl get -f pod.yaml -o json</span>

<span class="gp">  # </span>List resources from a directory with kustomization.yaml - e.g. dir/kustomization.yaml
<span class="go">  kubectl get -k dir/</span>

<span class="gp">  # </span>Return only the phase value of the specified pod
<span class="go">  kubectl get -o template pod/web-pod-13je7 --template={{.status.phase}}</span>

<span class="gp">  # </span>List resource information <span class="k">in</span> custom columns
<span class="go">  kubectl get pod test-pod -o custom-columns=CONTAINER:.spec.containers[0].name,IMAGE:.spec.containers[0].image</span>

<span class="gp">  # </span>List all replication controllers and services together <span class="k">in</span> ps output format
<span class="go">  kubectl get rc,services</span>

<span class="gp">  # </span>List one or more resources by their <span class="nb">type</span> and names
<span class="go">  kubectl get rc/web service/frontend pods/web-pod-13je7</span>

<span class="go">Options:</span>
<span class="go">  -A, --all-namespaces=false: If present, list the requested object(s) across all namespaces. Namespace in current</span>
<span class="go">context is ignored even if specified with --namespace.</span>
<span class="go">      --allow-missing-template-keys=true: If true, ignore any errors in templates when a field or map key is missing in</span>
<span class="go">the template. Only applies to golang and jsonpath output formats.</span>
<span class="go">      --chunk-size=500: Return large lists in chunks rather than all at once. Pass 0 to disable. This flag is beta and</span>
<span class="go">may change in the future.</span>
<span class="go">      --field-selector='': Selector (field query) to filter on, supports '=', '==', and '!='.(e.g. --field-selector</span>
<span class="go">key1=value1,key2=value2). The server only supports a limited number of field queries per type.</span>
<span class="go">  -f, --filename=[]: Filename, directory, or URL to files identifying the resource to get from a server.</span>
<span class="go">      --ignore-not-found=false: If the requested object does not exist the command will return exit code 0.</span>
<span class="go">  -k, --kustomize='': Process the kustomization directory. This flag can't be used together with -f or -R.</span>
<span class="go">  -L, --label-columns=[]: Accepts a comma separated list of labels that are going to be presented as columns. Names are</span>
<span class="go">case-sensitive. You can also use multiple flag options like -L label1 -L label2...</span>
<span class="go">      --no-headers=false: When using the default or custom-column output format, don't print headers (default print</span>
<span class="go">headers).</span>
<span class="go">  -o, --output='': Output format. One of:</span>
<span class="go">json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file|custom-columns|custom-columns-file|wide</span>
<span class="go">See custom columns [https://kubernetes.io/docs/reference/kubectl/overview/#custom-columns], golang template</span>
<span class="go">[http://golang.org/pkg/text/template/#pkg-overview] and jsonpath template</span>
<span class="go">[https://kubernetes.io/docs/reference/kubectl/jsonpath/].</span>
<span class="go">      --output-watch-events=false: Output watch event objects when --watch or --watch-only is used. Existing objects are</span>
<span class="go">output as initial ADDED events.</span>
<span class="go">      --raw='': Raw URI to request from the server.  Uses the transport specified by the kubeconfig file.</span>
<span class="go">  -R, --recursive=false: Process the directory used in -f, --filename recursively. Useful when you want to manage</span>
<span class="go">related manifests organized within the same directory.</span>
<span class="go">  -l, --selector='': Selector (label query) to filter on, supports '=', '==', and '!='.(e.g. -l key1=value1,key2=value2)</span>
<span class="go">      --server-print=true: If true, have the server return the appropriate table output. Supports extension APIs and</span>
<span class="go">CRDs.</span>
<span class="go">      --show-kind=false: If present, list the resource type for the requested object(s).</span>
<span class="go">      --show-labels=false: When printing, show all labels as the last column (default hide labels column)</span>
<span class="go">      --show-managed-fields=false: If true, keep the managedFields when printing objects in JSON or YAML format.</span>
<span class="go">      --sort-by='': If non-empty, sort list types using this field specification.  The field specification is expressed</span>
<span class="go">as a JSONPath expression (e.g. '{.metadata.name}'). The field in the API resource specified by this JSONPath expression</span>
<span class="go">must be an integer or a string.</span>
<span class="go">      --template='': Template string or path to template file to use when -o=go-template, -o=go-template-file. The</span>
<span class="go">template format is golang templates [http://golang.org/pkg/text/template/#pkg-overview].</span>
<span class="go">  -w, --watch=false: After listing/getting the requested object, watch for changes.</span>
<span class="go">      --watch-only=false: Watch for changes to the requested object(s), without listing/getting first.</span>

<span class="go">Usage:</span>
<span class="go">  kubectl get</span>
<span class="go">[(-o|--output=)json|yaml|name|go-template|go-template-file|template|templatefile|jsonpath|jsonpath-as-json|jsonpath-file|custom-columns|custom-columns-file|wide]</span>
<span class="gp gp-VirtualEnv">(TYPE[.VERSION][.GROUP] [NAME | -l label] | TYPE[.VERSION][.GROUP]/NAME ...)</span> <span class="go">[flags] [options]</span>

<span class="go">Use "kubectl options" for a list of global command-line options (applies to all commands).</span>
</pre></div>
</div>
</section>
</section>

        </article>
      </div>
      <footer>
        
        <div class="related-pages">
          <a class="next-page" href="kubernetes_kubectl.html">
              <div class="page-info">
                <div class="context">
                  <span>Next</span>
                </div>
                <div class="title">kubectl</div>
              </div>
              <svg><use href="#svg-arrow-right"></use></svg>
            </a>
          <a class="prev-page" href="kubernetes.html">
              <svg><use href="#svg-arrow-right"></use></svg>
              <div class="page-info">
                <div class="context">
                  <span>Previous</span>
                </div>
                
                <div class="title">Kubernetes</div>
                
              </div>
            </a>
        </div>

        <div class="related-information">
              Copyright &#169; 2021, kumarstack55 |
            Built with <a href="https://www.sphinx-doc.org/">Sphinx</a>
              and
              <a class="muted-link" href="https://pradyunsg.me">@pradyunsg</a>'s
              <a href="https://github.com/pradyunsg/furo">Furo theme</a>. |
            <a class="muted-link" href="_sources/kubernetes_foundation.md.txt"
               rel="nofollow">
              ソースコードを表示
            </a>
        </div>
        
      </footer>
    </div>
    <aside class="toc-drawer">
      
      
      <div class="toc-sticky toc-scroll">
        <div class="toc-title-container">
          <span class="toc-title">
            コンテンツ
          </span>
        </div>
        <div class="toc-tree-container">
          <div class="toc-tree">
            <ul>
<li><a class="reference internal" href="#">Kubernetes 基礎</a><ul>
<li><a class="reference internal" href="#id1">クライアントとサーバのバージョンを確認する。</a></li>
<li><a class="reference internal" href="#id2">設定のコンテキストを得る。</a></li>
<li><a class="reference internal" href="#id3">設定を見る。</a></li>
<li><a class="reference internal" href="#id4">イベントを得る。</a></li>
<li><a class="reference internal" href="#api">名前空間にあるAPIリソースを得る。</a></li>
<li><a class="reference internal" href="#id5">名前空間にないAPIリソースを得る。</a></li>
<li><a class="reference internal" href="#id6">名前空間の一覧を得る。</a></li>
<li><a class="reference internal" href="#id7">名前空間を作る。</a><ul>
<li><a class="reference internal" href="#yaml">名前空間をYAMLで作る。</a></li>
<li><a class="reference internal" href="#json">名前空間をJSONで作る。</a></li>
</ul>
</li>
<li><a class="reference internal" href="#id8">名前空間を消す。</a></li>
<li><a class="reference internal" href="#pod">Pod を作る。</a></li>
<li><a class="reference internal" href="#id9">Podの一覧を得る。</a></li>
<li><a class="reference internal" href="#id10">Podの情報を得る。</a></li>
<li><a class="reference internal" href="#podyaml">PodのYAMLを得る。</a></li>
<li><a class="reference internal" href="#pod-yaml">Pod の YAMLを得て、編集し、反映する。</a></li>
<li><a class="reference internal" href="#pods">Pods 内でコマンドを実行する。</a></li>
<li><a class="reference internal" href="#id11">Pods を消す。</a></li>
<li><a class="reference internal" href="#id12">リソースの一覧を得る。</a></li>
<li><a class="reference internal" href="#id13">リソースの情報を得る。</a></li>
<li><a class="reference internal" href="#id14">ログを得る。</a></li>
<li><a class="reference internal" href="#id15">コンテナ内でコマンドを実行する。</a></li>
<li><a class="reference internal" href="#id16">すべての名前空間のpodsを得る。</a></li>
<li><a class="reference internal" href="#deployment">Deploymentを得る。</a></li>
<li><a class="reference internal" href="#deploymentpods">Deploymentを作ることで、Podsを作る。</a></li>
<li><a class="reference internal" href="#export-service">export で Service を作る。</a></li>
<li><a class="reference internal" href="#kubectl-get-pods-h">参考: kubectl get pods -h</a></li>
</ul>
</li>
</ul>

          </div>
        </div>
      </div>
      
      
    </aside>
  </div>
</div><script data-url_root="./" id="documentation_options" src="_static/documentation_options.js"></script>
    <script src="_static/jquery.js"></script>
    <script src="_static/underscore.js"></script>
    <script src="_static/doctools.js"></script>
    <script src="_static/scripts/main.js"></script>
    <script src="_static/translations.js"></script>
    </body>
</html>