# SSH

## Windows の OpenSSH の ssh.exe で pageant を利用できるようにする。

[wsl-ssh-pageant](https://github.com/benpye/wsl-ssh-pageant)を使う。
Pageant.exe に秘密鍵を読ませて、次のようにシステムトレイに常駐させておく。

```
wsl-ssh-pageant-amd64-gui.exe --systray --winssh ssh-pageant
```

## SSHでエージェントの公開鍵を authorized_keys に加える。

```bash
ssh-add -L \
  | while read -r line; do
      ansible \
        -m lineinfile \
        -a "path='${HOME}/.ssh/authorized_keys' line='${line}' backup=yes" \
        localhost
    done
```
